function directiveFunc(e){var t=function(t,o,n){function a(e){for(var t,o=e.parent(),n=o.children(),a=1;a<n.length;a++)n[a]===e[0]&&(t=n[a-1]);return t}o.find("input").bind("blur",function(){e(function(){t.showListFlag=!1},200)}),o.find("input").on("keydown",function(e){var n=null;if(13===e.keyCode&&angular.element(o.children()[2].querySelector(".collection-item.active")).triggerHandler("click"),40===e.keyCode|38===e.keyCode&&(n=angular.element(o.children()[2]).children(),0!==n.length)){var i=o.children()[2].querySelector(".collection-item.active"),l=!0;angular.element(i).length>0&&(l=!1),i=angular.element(i).length>0?i:n[0],40===e.keyCode?l?angular.element(i).addClass("active").children("span").css("color","white"):(angular.element(i).removeClass("active").children("span").css("color",t.color),angular.element(i).next().addClass("active").children("span").css("color","white")):38===e.keyCode&&(angular.element(i).removeClass("active").children("span").css("color",t.color),angular.element(a(angular.element(i))).addClass("active").children("span").css("color","white"))}})};return{restrict:"E",replace:!0,scope:{autoData:"=",sourceLink:"=",acTitle:"=",color:"=",inputModel:"="},link:t,controller:autocompleteController,template:'<div ng-init="init()" style="position:relative;"><style>input[type=text]:focus:not([readonly])#auto-complete-id{  border-bottom:1px solid {{color}} !important;   box-shadow:0 1px 0 0 {{color}} !important; }  #auto-complete-label.active{      color:{{color}} !important;     }  .collection-item.active  {    background-color:{{color}} !important; /*! */  }  </style>  <div class="input-field">    <input type="text" id="auto-complete-id" ng-model="inputModel" ng-change="textChange()" ng-focus="changeShowVariable(true)">    <label id="auto-complete-label" for="auto-complete-id"><span ng-bind="acTitle"></span></label>  </div>  <div class="collection" ng-show="showList()" style="margin-top: -1%;position:absolute;width:100%;z-index:99;">  <a class="collection-item" ng-repeat="item in getData()" ng-click="chooseItem(item)"><span style="color:{{color}};" ng-bind="item"></span></a>  </div></div>'}}function autocompleteController(e,t){e.inputModel="",e.dataType=0,e.dataToList=[],e.showListFlag=!1,e.init=function(){void 0!==e.autoData&&e.autoData.length>0?e.dataType=1:void 0!==e.sourceLink&&""!==e.sourceLink&&(e.dataType=2,e.dataToList=t.getData(e.sourceLink))},e.changeShowVariable=function(t){t?t=0!==e.dataType&&0!==e.inputModel.length:e.chooseItemFlag&&(t=!0),e.showListFlag=t},e.showList=function(){return e.showListFlag},e.getData=function(){if(e.dataToList=[],1===e.dataType)for(var t=0;t<e.autoData.length;t++)-1!==e.autoData[t].indexOf(e.inputModel)&&e.dataToList.push(e.autoData[t]);return 0===e.dataToList.length&&(e.showListFlag=!1),e.dataToList},e.chooseItem=function(t){e.inputModel=t,e.showListFlag=!1},e.textChange=function(){e.showListFlag=0!==e.dataType&&0!==e.inputModel.length},e.showTitle=function(){return void 0!==e.title&&0!==e.length}}function autoServiceFunction(e,t){var o={getData:function(o){var n=t.defer();return e.get(o).then(function(e){n.resolve(e)},function(e){n.reject()}),n.promise}};return o}angular.module("auto-complete",[]),angular.module("auto-complete").directive("autoCompleteInput",directiveFunc),directiveFunc.$inject=["$timeout"],autocompleteController.$inject=["$scope","autoService"],angular.module("auto-complete").service("autoService",autoServiceFunction),autoServiceFunction.$inject=["$http","$q"];